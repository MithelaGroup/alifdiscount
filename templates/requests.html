{% extends "base.html" %}
{% block title %}Requests â€” ALIF Discount{% endblock %}
{% block content %}

<h2 class="h2">All Requests</h2>

<section class="card">
  <div class="card-h">
    <h3>Requests</h3>
    <div class="muted">latest 10</div>
  </div>

  <div class="table">
    <div class="tr head">
      <div>Code</div>
      <div>Customer Name & Mobile</div>
      <div>Cashier</div>
      <div>Reference</div>
      <div>Approved by</div>
      <div>Status</div>
      <div class="right">Actions</div>
    </div>

    {% for r in latest %}
    <div class="tr">
      <div class="mono">{{ r.request_code }}</div>
      <div>
        <div class="strong">{{ r.customer_name }}</div>
        <div class="muted">{{ r.customer_mobile }}</div>
      </div>
      <div>{{ r.cashier.username }}</div>
      <div>{{ r.reference_user.username }}</div>
      <div>{{ r.approved_by_user and r.approved_by_user.username or '-' }}</div>
      <div>
        {% if r.status == 'PENDING' %}<span class="badge warn">Requested</span>
        {% elif r.status == 'APPROVED' %}<span class="badge ok">Approved</span>
        {% elif r.status == 'DONE' %}<span class="badge info">Completed</span>
        {% elif r.status == 'REJECTED' %}<span class="badge danger">Rejected</span>
        {% else %}<span class="badge">{{ r.status }}</span>{% endif %}
      </div>
      <div class="right">
        {% include 'partials/_row_actions.html' %}
      </div>
    </div>

    {% include 'partials/_modals_actions.html' %}
    {% else %}
      <div class="muted" style="padding:12px;">No requests found.</div>
    {% endfor %}
  </div>
</section>

{% endblock %}
